!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define(b):(a.Keyboard=b())}(this,(function(){'use strict';var a=function(){function a(a,b){var c=[],d=!0,e=!1,f=undefined;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0,f=a}finally{try{!d&&g["return"]&&g["return"]()}finally{if(e)throw f}};return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),b=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}else{return Array.from(a)}},c={8:'backspace',9:'tab',13:'enter',20:'capslock',27:'esc',32:'space',33:'page-up',34:'page-down',35:'end',36:'home',37:'arrow-left',38:'arrow-up',39:'arrow-right',40:'arrow-down',45:'insert',46:'delete',144:'numlock'},d={16:'shift',17:'ctrl',18:'alt',91:'cmd'},e=new Map([[91,{name:'cmd',selected:!1}],[17,{name:'ctrl',selected:!1}],[16,{name:'shift',selected:!1}],[18,{name:'alt',selected:!1}]]),f=!1,g='',h=new Map();function j(){k();var a=document.querySelector('body');a.addEventListener('keydown',l);a.addEventListener('keyup',r)}function k(){var a=document.querySelector('body');a.removeEventListener('keydown',l);a.removeEventListener('keyup',r)}function l(a){s(a).map(m(a))}var m=function b(a){return function(b){var c=h.get(b),d=u(c.useCmdKey,a);if(!q(d)){p();n(d);var e=c.actions.get(g.toLowerCase());o(b,c,e,a);g=''}}};function n(a){g+=c[a]||String.fromCharCode(a).toLowerCase()}function o(a,b,c,d){c&&c.fn&&c.fn!=='-'&&(c.fn({element:a,event:d,command:g,target:d.target,data:c.data,props:b.props}),c.once&&h.delete(a))}function p(){if(f){var b=!0,c=!1,d=undefined;try{for(var h=e.entries()[Symbol.iterator](),i;!(b=(i=h.next()).done);b=!0){var j=a(i.value,2),l=j[1];l.selected&&(g+=l.name+'+')}}catch(a){c=!0,d=a}finally{try{!b&&h.return&&h.return()}finally{if(c){throw d}}}}}function q(a){if(d[a]){f=!0;e.get(a).selected=!0;return !0}return !1}function r(){var b=!0,c=!1,d=undefined;try{for(var f=e.entries()[Symbol.iterator](),g;!(b=(g=f.next()).done);b=!0){var h=a(g.value,2),i=h[0];e.get(i).selected=!1}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c){throw d}}}}function s(a){return(a.path||a.composedPath&&a.composedPath()||t(a)).filter(function(a){return h.get(a)})}function t(a){var b=a.target,c=[];while(b.tagName.toLowerCase()!=='html')c.push(b),b=b.parentElement;document&&c.push(document);Window&&c.push(Window);return c}var u=function c(a,b){return a?b.which:b.which===91?17:b._testCode||b.which};function v(){h.delete(options.elm);[].concat(b(h.values())).length<1&&k()}function w(a){if(!a.elm){throw new Error('\n      Trying to create a keyboard event listener without providing\n      an element to listen on\n    ')}h.set(a.elm,{useCmdKey:a.useCmdKey||!1,props:a.props||{},actions:new Map((a.import||[]).concat(a.actions||[]))});j();return{unsubscribe:v,listen:j}}w.cancel=k;return w}))
//# sourceMappingURL=keyboard-events.min.js.map
